<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 16 Running Tercen from the CLI | Tercen developer’s guide</title>
<meta name="author" content="Tercen">
<meta name="description" content="This chapter provides an overview of workflows automation in Tercen using Python and the API. The script uses the Tercen Python client to interact with a local Tercen instance, create a temporary...">
<meta name="generator" content="bookdown 0.43 with bs4_book()">
<meta property="og:title" content="Chapter 16 Running Tercen from the CLI | Tercen developer’s guide">
<meta property="og:type" content="book">
<meta property="og:description" content="This chapter provides an overview of workflows automation in Tercen using Python and the API. The script uses the Tercen Python client to interact with a local Tercen instance, create a temporary...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 16 Running Tercen from the CLI | Tercen developer’s guide">
<meta name="twitter:description" content="This chapter provides an overview of workflows automation in Tercen using Python and the API. The script uses the Tercen Python client to interact with a local Tercen instance, create a temporary...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.9.0/transition.js"></script><script src="libs/bs3compat-0.9.0/tabs.js"></script><script src="libs/bs3compat-0.9.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Tercen developer’s guide</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Introduction</a></li>
<li><a class="" href="guidelines.html"><span class="header-section-number">1</span> Guidelines</a></li>
<li class="book-part">Getting started</li>
<li><a class="" href="core-concepts.html"><span class="header-section-number">2</span> Core concepts</a></li>
<li><a class="" href="setting-up-tercen-studio.html"><span class="header-section-number">3</span> Setting up Tercen Studio</a></li>
<li class="book-part">R Operator development</li>
<li><a class="" href="general-workflow.html"><span class="header-section-number">4</span> General workflow</a></li>
<li><a class="" href="walkthrough-example-r-operator.html"><span class="header-section-number">5</span> Walkthrough example: R operator</a></li>
<li><a class="" href="deploying-an-r-operator.html"><span class="header-section-number">6</span> Deploying an R operator</a></li>
<li><a class="" href="improving-an-operator.html"><span class="header-section-number">7</span> Improving an operator</a></li>
<li class="book-part">Python Operator development</li>
<li><a class="" href="getting-familiar-with-tercen-studio.html"><span class="header-section-number">8</span> Getting familiar with Tercen Studio</a></li>
<li><a class="" href="developing-a-python-operator.html"><span class="header-section-number">9</span> Developing a Python Operator</a></li>
<li class="book-part">Advanced concepts</li>
<li><a class="" href="continuous-integration-workflow.html"><span class="header-section-number">10</span> Continuous Integration Workflow</a></li>
<li><a class="" href="release-workflow.html"><span class="header-section-number">11</span> Release Workflow</a></li>
<li><a class="" href="installing-an-operator.html"><span class="header-section-number">12</span> Installing an Operator</a></li>
<li><a class="" href="input-and-output-patterns.html"><span class="header-section-number">13</span> Input and Output Patterns</a></li>
<li><a class="" href="gpu-development-in-tercen-studio.html"><span class="header-section-number">14</span> GPU Development in Tercen Studio</a></li>
<li><a class="" href="patterns-for-plot-operators.html"><span class="header-section-number">15</span> Patterns for Plot Operators</a></li>
<li><a class="active" href="running-tercen-from-the-cli.html"><span class="header-section-number">16</span> Running Tercen from the CLI</a></li>
<li class="book-part">Templates</li>
<li><a class="" href="building-a-template.html"><span class="header-section-number">17</span> Building a template</a></li>
<li><a class="" href="continuous-integration-workflow-1.html"><span class="header-section-number">18</span> Continuous Integration Workflow</a></li>
<li class="book-part">Library</li>
<li><a class="" href="tercen-library.html"><span class="header-section-number">19</span> Tercen Library</a></li>
<li><a class="" href="custom-library.html"><span class="header-section-number">20</span> Custom library</a></li>
<li class="book-part">Best practices</li>
<li><a class="" href="naming.html"><span class="header-section-number">21</span> Development guidelines</a></li>
<li><a class="" href="tim.html"><span class="header-section-number">22</span> Using tim</a></li>
<li class="book-part">Troubleshooting</li>
<li><a class="" href="common-operator-issues.html"><span class="header-section-number">23</span> Common operator issues</a></li>
<li><a class="" href="ci-and-github-actions.html"><span class="header-section-number">24</span> CI and Github Actions</a></li>
<li class="book-part">Going forward</li>
<li><a class="" href="next-steps-1.html"><span class="header-section-number">25</span> Next steps</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="glossary.html">Glossary</a></li>
<li><a class="" href="organisation-setup.html">Organisation setup</a></li>
<li><a class="" href="tercen-studio.html">Tercen Studio</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="running-tercen-from-the-cli" class="section level1" number="16">
<h1>
<span class="header-section-number">16</span> Running Tercen from the CLI<a class="anchor" aria-label="anchor" href="#running-tercen-from-the-cli"><i class="fas fa-link"></i></a>
</h1>
<p>This chapter provides an overview of workflows automation in Tercen using Python and the API. The script uses the Tercen Python client to interact with a local Tercen instance, create a temporary project, import a Git repository, and trigger workflow computations using predefined data.</p>
<div id="prerequisites-1" class="section level2" number="16.1">
<h2>
<span class="header-section-number">16.1</span> Prerequisites<a class="anchor" aria-label="anchor" href="#prerequisites-1"><i class="fas fa-link"></i></a>
</h2>
<p>To use the workflow runner script, ensure the following:</p>
<ul>
<li>A local instance of Tercen is running (e.g., via Tercen Studio).</li>
<li>The Tercen Python client is installed (<code>tercen</code> package).</li>
<li>A GitHub token is available as an environment variable (<code>GITHUB_TOKEN</code>) for repository access, if needed.</li>
</ul>
<div id="required-python-libraries" class="section level3" number="16.1.1">
<h3>
<span class="header-section-number">16.1.1</span> Required Python Libraries<a class="anchor" aria-label="anchor" href="#required-python-libraries"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb66"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb66-1"><a href="running-tercen-from-the-cli.html#cb66-1" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb66-2"><a href="running-tercen-from-the-cli.html#cb66-2" tabindex="-1"></a><span class="im">import</span> string</span>
<span id="cb66-3"><a href="running-tercen-from-the-cli.html#cb66-3" tabindex="-1"></a><span class="im">import</span> random</span>
<span id="cb66-4"><a href="running-tercen-from-the-cli.html#cb66-4" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb66-5"><a href="running-tercen-from-the-cli.html#cb66-5" tabindex="-1"></a><span class="im">import</span> uuid</span>
<span id="cb66-6"><a href="running-tercen-from-the-cli.html#cb66-6" tabindex="-1"></a><span class="im">from</span> tercen.client <span class="im">import</span> context <span class="im">as</span> ctx</span>
<span id="cb66-7"><a href="running-tercen-from-the-cli.html#cb66-7" tabindex="-1"></a><span class="im">from</span> tercen.client.factory <span class="im">import</span> TercenClient</span>
<span id="cb66-8"><a href="running-tercen-from-the-cli.html#cb66-8" tabindex="-1"></a><span class="im">from</span> tercen.model.impl <span class="im">import</span> Project, GitProjectTask, InitState, TableStep, TableStepModel, SimpleRelation, StepState, DoneState, RunWorkflowTask, Pair</span></code></pre></div>
</div>
<div id="configuration-variables" class="section level3" number="16.1.2">
<h3>
<span class="header-section-number">16.1.2</span> Configuration Variables<a class="anchor" aria-label="anchor" href="#configuration-variables"><i class="fas fa-link"></i></a>
</h3>
<p>The script uses the following configuration variables:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb67-1"><a href="running-tercen-from-the-cli.html#cb67-1" tabindex="-1"></a>user <span class="op">=</span> <span class="st">"workflow_runner"</span></span>
<span id="cb67-2"><a href="running-tercen-from-the-cli.html#cb67-2" tabindex="-1"></a>passw <span class="op">=</span> <span class="st">"workflow_runner"</span></span>
<span id="cb67-3"><a href="running-tercen-from-the-cli.html#cb67-3" tabindex="-1"></a>service_uri <span class="op">=</span> <span class="st">"http://tercen:5400"</span></span>
<span id="cb67-4"><a href="running-tercen-from-the-cli.html#cb67-4" tabindex="-1"></a>template_repo <span class="op">=</span> <span class="st">"https://github.com/tercen/dose_response_template"</span></span>
<span id="cb67-5"><a href="running-tercen-from-the-cli.html#cb67-5" tabindex="-1"></a>branch <span class="op">=</span> <span class="st">"main"</span></span>
<span id="cb67-6"><a href="running-tercen-from-the-cli.html#cb67-6" tabindex="-1"></a>tag <span class="op">=</span> <span class="st">""</span></span>
<span id="cb67-7"><a href="running-tercen-from-the-cli.html#cb67-7" tabindex="-1"></a>git_token <span class="op">=</span> os.environ.get(<span class="st">"GITHUB_TOKEN"</span>, <span class="st">""</span>)</span>
<span id="cb67-8"><a href="running-tercen-from-the-cli.html#cb67-8" tabindex="-1"></a>template_folder <span class="op">=</span> <span class="st">"workflow_tests"</span></span></code></pre></div>
<ul>
<li>
<code>user</code> and <code>passw</code>: Credentials for authenticating with the Tercen instance.</li>
<li>
<code>service_uri</code>: URL of the local Tercen instance.</li>
<li>
<code>template_repo</code>: GitHub repository containing the workflow template.</li>
<li>
<code>branch</code>: Git branch to use (e.g., <code>main</code>).</li>
<li>
<code>tag</code>: Optional Git tag (empty by default).</li>
<li>
<code>git_token</code>: GitHub personal access token for repository access.</li>
<li>
<code>template_folder</code>: Folder for workflow tests.</li>
</ul>
</div>
</div>
<div id="script-workflow" class="section level2" number="16.2">
<h2>
<span class="header-section-number">16.2</span> Script Workflow<a class="anchor" aria-label="anchor" href="#script-workflow"><i class="fas fa-link"></i></a>
</h2>
<p>The script performs the following steps:</p>
<div id="initialize-the-tercen-client" class="section level3" number="16.2.1">
<h3>
<span class="header-section-number">16.2.1</span> 1. Initialize the Tercen Client<a class="anchor" aria-label="anchor" href="#initialize-the-tercen-client"><i class="fas fa-link"></i></a>
</h3>
<p>The script initializes a connection to the Tercen instance using the provided credentials.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb68-1"><a href="running-tercen-from-the-cli.html#cb68-1" tabindex="-1"></a>client <span class="op">=</span> TercenClient(<span class="st">"http://tercen:5400"</span>)</span>
<span id="cb68-2"><a href="running-tercen-from-the-cli.html#cb68-2" tabindex="-1"></a>client.userService.<span class="ex">connect</span>(user, passw)</span></code></pre></div>
</div>
<div id="create-a-temporary-project" class="section level3" number="16.2.2">
<h3>
<span class="header-section-number">16.2.2</span> 2. Create a Temporary Project<a class="anchor" aria-label="anchor" href="#create-a-temporary-project"><i class="fas fa-link"></i></a>
</h3>
<p>A temporary project is created with a randomly generated name to serve as the workspace for the workflow.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb69-1"><a href="running-tercen-from-the-cli.html#cb69-1" tabindex="-1"></a>project <span class="op">=</span> Project()</span>
<span id="cb69-2"><a href="running-tercen-from-the-cli.html#cb69-2" tabindex="-1"></a>project.name <span class="op">=</span> <span class="st">'WorkflowRunner_'</span> <span class="op">+</span> <span class="st">''</span>.join(random.choices(string.ascii_uppercase <span class="op">+</span> string.digits, k<span class="op">=</span><span class="dv">4</span>))</span>
<span id="cb69-3"><a href="running-tercen-from-the-cli.html#cb69-3" tabindex="-1"></a>project.acl.owner <span class="op">=</span> user</span>
<span id="cb69-4"><a href="running-tercen-from-the-cli.html#cb69-4" tabindex="-1"></a>project <span class="op">=</span> client.projectService.create(project)</span></code></pre></div>
<p>The project name is prefixed with <code>WorkflowRunner_</code> followed by a four-character random string.</p>
</div>
<div id="import-a-git-repository" class="section level3" number="16.2.3">
<h3>
<span class="header-section-number">16.2.3</span> 3. Import a Git Repository<a class="anchor" aria-label="anchor" href="#import-a-git-repository"><i class="fas fa-link"></i></a>
</h3>
<p>The script sets up and triggers a <code>GitProjectTask</code> to clone the specified repository into the project.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb70-1"><a href="running-tercen-from-the-cli.html#cb70-1" tabindex="-1"></a>import_task <span class="op">=</span> GitProjectTask()</span>
<span id="cb70-2"><a href="running-tercen-from-the-cli.html#cb70-2" tabindex="-1"></a>import_task.owner <span class="op">=</span> user</span>
<span id="cb70-3"><a href="running-tercen-from-the-cli.html#cb70-3" tabindex="-1"></a>import_task.state <span class="op">=</span> InitState()</span>
<span id="cb70-4"><a href="running-tercen-from-the-cli.html#cb70-4" tabindex="-1"></a></span>
<span id="cb70-5"><a href="running-tercen-from-the-cli.html#cb70-5" tabindex="-1"></a>import_task.addMeta(<span class="st">"PROJECT_ID"</span>, project.<span class="bu">id</span>)</span>
<span id="cb70-6"><a href="running-tercen-from-the-cli.html#cb70-6" tabindex="-1"></a>import_task.addMeta(<span class="st">"PROJECT_REV"</span>, project.rev)</span>
<span id="cb70-7"><a href="running-tercen-from-the-cli.html#cb70-7" tabindex="-1"></a>import_task.addMeta(<span class="st">"GIT_ACTION"</span>, <span class="st">"reset/pull"</span>)</span>
<span id="cb70-8"><a href="running-tercen-from-the-cli.html#cb70-8" tabindex="-1"></a>import_task.addMeta(<span class="st">"GIT_PAT"</span>, git_token)</span>
<span id="cb70-9"><a href="running-tercen-from-the-cli.html#cb70-9" tabindex="-1"></a>import_task.addMeta(<span class="st">"GIT_URL"</span>, template_repo)</span>
<span id="cb70-10"><a href="running-tercen-from-the-cli.html#cb70-10" tabindex="-1"></a>import_task.addMeta(<span class="st">"GIT_BRANCH"</span>, branch)</span>
<span id="cb70-11"><a href="running-tercen-from-the-cli.html#cb70-11" tabindex="-1"></a>import_task.addMeta(<span class="st">"GIT_MESSAGE"</span>, <span class="st">""</span>)</span>
<span id="cb70-12"><a href="running-tercen-from-the-cli.html#cb70-12" tabindex="-1"></a><span class="cf">if</span> tag:</span>
<span id="cb70-13"><a href="running-tercen-from-the-cli.html#cb70-13" tabindex="-1"></a>    import_task.addMeta(<span class="st">"GIT_TAG"</span>, tag)</span>
<span id="cb70-14"><a href="running-tercen-from-the-cli.html#cb70-14" tabindex="-1"></a></span>
<span id="cb70-15"><a href="running-tercen-from-the-cli.html#cb70-15" tabindex="-1"></a>import_task <span class="op">=</span> client.taskService.create(import_task)</span>
<span id="cb70-16"><a href="running-tercen-from-the-cli.html#cb70-16" tabindex="-1"></a>client.taskService.runTask(import_task.<span class="bu">id</span>)</span>
<span id="cb70-17"><a href="running-tercen-from-the-cli.html#cb70-17" tabindex="-1"></a>importTask <span class="op">=</span> client.taskService.waitDone(import_task.<span class="bu">id</span>)</span></code></pre></div>
<p>Key metadata includes the project ID, Git URL, branch, and authentication token. The task clones the <code>dose_response_template</code> repository and waits for completion.</p>
</div>
<div id="trigger-workflow-computation" class="section level3" number="16.2.4">
<h3>
<span class="header-section-number">16.2.4</span> 4. Trigger Workflow Computation<a class="anchor" aria-label="anchor" href="#trigger-workflow-computation"><i class="fas fa-link"></i></a>
</h3>
<p>The script retrieves a predefined workflow, table step, and dataset using hardcoded IDs, then triggers a computation.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb71-1"><a href="running-tercen-from-the-cli.html#cb71-1" tabindex="-1"></a>project <span class="op">=</span> client.projectService.get(<span class="st">"9c44bf7ae873f33e0171dea4fd012375"</span>)</span>
<span id="cb71-2"><a href="running-tercen-from-the-cli.html#cb71-2" tabindex="-1"></a>workflow_id <span class="op">=</span> <span class="st">"9c44bf7ae873f33e0171dea4fd016344"</span></span>
<span id="cb71-3"><a href="running-tercen-from-the-cli.html#cb71-3" tabindex="-1"></a>step_id <span class="op">=</span> <span class="st">"1e0b619b-b8fa-43c3-aef8-6e0f5d8f80f8"</span></span>
<span id="cb71-4"><a href="running-tercen-from-the-cli.html#cb71-4" tabindex="-1"></a>relation_id <span class="op">=</span> <span class="st">"9c44bf7ae873f33e0171dea4fd015d70"</span></span>
<span id="cb71-5"><a href="running-tercen-from-the-cli.html#cb71-5" tabindex="-1"></a>workflow <span class="op">=</span> client.workflowService.get(workflow_id)</span>
<span id="cb71-6"><a href="running-tercen-from-the-cli.html#cb71-6" tabindex="-1"></a>table_step <span class="op">=</span> <span class="bu">next</span>((step <span class="cf">for</span> step <span class="kw">in</span> workflow.steps <span class="cf">if</span> step.<span class="bu">id</span> <span class="op">==</span> step_id), <span class="va">None</span>)</span>
<span id="cb71-7"><a href="running-tercen-from-the-cli.html#cb71-7" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> table_step:</span>
<span id="cb71-8"><a href="running-tercen-from-the-cli.html#cb71-8" tabindex="-1"></a>    <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="ss">f"No table step found with ID </span><span class="sc">{</span>step_id<span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div>
<p>The script configures the table step with a <code>SimpleRelation</code> and marks it as complete.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb72-1"><a href="running-tercen-from-the-cli.html#cb72-1" tabindex="-1"></a>table_step_model <span class="op">=</span> TableStepModel()</span>
<span id="cb72-2"><a href="running-tercen-from-the-cli.html#cb72-2" tabindex="-1"></a>simple_rel <span class="op">=</span> SimpleRelation()</span>
<span id="cb72-3"><a href="running-tercen-from-the-cli.html#cb72-3" tabindex="-1"></a>simple_rel.<span class="bu">id</span> <span class="op">=</span> relation_id</span>
<span id="cb72-4"><a href="running-tercen-from-the-cli.html#cb72-4" tabindex="-1"></a>table_step_model.relation <span class="op">=</span> simple_rel</span>
<span id="cb72-5"><a href="running-tercen-from-the-cli.html#cb72-5" tabindex="-1"></a>table_step.model <span class="op">=</span> table_step_model</span>
<span id="cb72-6"><a href="running-tercen-from-the-cli.html#cb72-6" tabindex="-1"></a></span>
<span id="cb72-7"><a href="running-tercen-from-the-cli.html#cb72-7" tabindex="-1"></a>step_state <span class="op">=</span> StepState()</span>
<span id="cb72-8"><a href="running-tercen-from-the-cli.html#cb72-8" tabindex="-1"></a>step_state.taskState <span class="op">=</span> DoneState()</span>
<span id="cb72-9"><a href="running-tercen-from-the-cli.html#cb72-9" tabindex="-1"></a>table_step.state <span class="op">=</span> step_state</span>
<span id="cb72-10"><a href="running-tercen-from-the-cli.html#cb72-10" tabindex="-1"></a></span>
<span id="cb72-11"><a href="running-tercen-from-the-cli.html#cb72-11" tabindex="-1"></a>client.workflowService.update(workflow)</span></code></pre></div>
<p>A <code>RunWorkflowTask</code> is then created and executed to run the workflow computation.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb73-1"><a href="running-tercen-from-the-cli.html#cb73-1" tabindex="-1"></a>runTask <span class="op">=</span> RunWorkflowTask()</span>
<span id="cb73-2"><a href="running-tercen-from-the-cli.html#cb73-2" tabindex="-1"></a>runTask.state <span class="op">=</span> InitState()</span>
<span id="cb73-3"><a href="running-tercen-from-the-cli.html#cb73-3" tabindex="-1"></a>runTask.workflowId <span class="op">=</span> workflow.<span class="bu">id</span></span>
<span id="cb73-4"><a href="running-tercen-from-the-cli.html#cb73-4" tabindex="-1"></a>runTask.workflowRev <span class="op">=</span> workflow.rev</span>
<span id="cb73-5"><a href="running-tercen-from-the-cli.html#cb73-5" tabindex="-1"></a>runTask.owner <span class="op">=</span> project.acl.owner</span>
<span id="cb73-6"><a href="running-tercen-from-the-cli.html#cb73-6" tabindex="-1"></a>runTask.projectId <span class="op">=</span> project.<span class="bu">id</span></span>
<span id="cb73-7"><a href="running-tercen-from-the-cli.html#cb73-7" tabindex="-1"></a></span>
<span id="cb73-8"><a href="running-tercen-from-the-cli.html#cb73-8" tabindex="-1"></a>runTask <span class="op">=</span> client.taskService.create(obj<span class="op">=</span>runTask)</span>
<span id="cb73-9"><a href="running-tercen-from-the-cli.html#cb73-9" tabindex="-1"></a>client.taskService.runTask(taskId<span class="op">=</span>runTask.<span class="bu">id</span>)</span>
<span id="cb73-10"><a href="running-tercen-from-the-cli.html#cb73-10" tabindex="-1"></a>runTask <span class="op">=</span> client.taskService.waitDone(taskId<span class="op">=</span>runTask.<span class="bu">id</span>)</span>
<span id="cb73-11"><a href="running-tercen-from-the-cli.html#cb73-11" tabindex="-1"></a></span>
<span id="cb73-12"><a href="running-tercen-from-the-cli.html#cb73-12" tabindex="-1"></a>client.workflowService.update(workflow)</span></code></pre></div>
</div>
<div id="next-steps" class="section level3" number="16.2.5">
<h3>
<span class="header-section-number">16.2.5</span> 5. Next Steps<a class="anchor" aria-label="anchor" href="#next-steps"><i class="fas fa-link"></i></a>
</h3>
<p>The script includes suggestions for further exploration:</p>
<ul>
<li>Review the workflow runner’s capabilities.</li>
<li>Explore the Tercen Python client unit tests for additional API usage examples.</li>
<li>Investigate GitHub Actions for integrating the workflow runner into a CI/CD pipeline.</li>
</ul>
</div>
</div>
<div id="available-tasks" class="section level2" number="16.3">
<h2>
<span class="header-section-number">16.3</span> Available Tasks<a class="anchor" aria-label="anchor" href="#available-tasks"><i class="fas fa-link"></i></a>
</h2>
<p>The Tercen platform supports various tasks for workflow and project management, including:</p>
<ul>
<li><code>CreateGitOperatorTask</code></li>
<li><code>TestOperatorTask</code></li>
<li><code>ExportTableTask</code></li>
<li><code>ExportWorkflowTask</code></li>
<li><code>ImportWorkflowTask</code></li>
<li><code>ImportGitWorkflowTask</code></li>
<li><code>ImportGitDatasetTask</code></li>
<li><code>RunWebAppTask</code></li>
<li><code>CSVTask</code></li>
<li><code>CubeQueryTask</code></li>
<li><code>RunWorkflowTask</code></li>
<li><code>RunComputationTask</code></li>
<li><code>ComputationTask</code></li>
<li><code>SaveComputationResultTask</code></li>
<li><code>GlTask</code></li>
<li><code>GitProjectTask</code></li>
<li><code>LibraryTask</code></li>
</ul>
</div>
<div id="useful-resources" class="section level2" number="16.4">
<h2>
<span class="header-section-number">16.4</span> Useful Resources<a class="anchor" aria-label="anchor" href="#useful-resources"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>
<strong>Tercen Python Client</strong>: <a href="https://github.com/tercen/tercen_python_client">https://github.com/tercen/tercen_python_client</a> – Check unit tests for API usage examples.</li>
<li>
<strong>Tercen Workflow Runner</strong>: <a href="https://github.com/tercen/workflow_runner_operator">https://github.com/tercen/workflow_runner_operator</a>
</li>
<li>
<strong>Tercen Developers Guide</strong>: <a href="https://tercen.github.io/developers_guide/">https://tercen.github.io/developers_guide/</a>
</li>
<li>
<strong>Dose-Response Curve Fit Template</strong>: <a href="https://github.com/tercen/dose_response_template">https://github.com/tercen/dose_response_template</a>
</li>
</ul>
</div>
<div id="notes" class="section level2" number="16.5">
<h2>
<span class="header-section-number">16.5</span> Notes<a class="anchor" aria-label="anchor" href="#notes"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>The script assumes a local Tercen instance is running. For CI/CD integration, refer to <a href="https://github.com/tercen/actions/blob/main/start-tercen">Tercen GitHub Actions</a> for starting a local instance.</li>
<li>Hardcoded IDs (e.g., <code>workflow_id</code>, <code>step_id</code>) are used for demonstration. In production, these should be dynamically retrieved or passed as parameters.</li>
<li>Ensure the GitHub token has appropriate permissions to access the target repository.</li>
</ul>
<p>This script serves as a foundation for automating Tercen workflows and can be extended for more complex use cases, such as parameterized workflow execution or integration with external systems.</p>

</div>
</div>



  <div class="chapter-nav">
<div class="prev"><a href="patterns-for-plot-operators.html"><span class="header-section-number">15</span> Patterns for Plot Operators</a></div>
<div class="next"><a href="building-a-template.html"><span class="header-section-number">17</span> Building a template</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#running-tercen-from-the-cli"><span class="header-section-number">16</span> Running Tercen from the CLI</a></li>
<li>
<a class="nav-link" href="#prerequisites-1"><span class="header-section-number">16.1</span> Prerequisites</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#required-python-libraries"><span class="header-section-number">16.1.1</span> Required Python Libraries</a></li>
<li><a class="nav-link" href="#configuration-variables"><span class="header-section-number">16.1.2</span> Configuration Variables</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#script-workflow"><span class="header-section-number">16.2</span> Script Workflow</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#initialize-the-tercen-client"><span class="header-section-number">16.2.1</span> 1. Initialize the Tercen Client</a></li>
<li><a class="nav-link" href="#create-a-temporary-project"><span class="header-section-number">16.2.2</span> 2. Create a Temporary Project</a></li>
<li><a class="nav-link" href="#import-a-git-repository"><span class="header-section-number">16.2.3</span> 3. Import a Git Repository</a></li>
<li><a class="nav-link" href="#trigger-workflow-computation"><span class="header-section-number">16.2.4</span> 4. Trigger Workflow Computation</a></li>
<li><a class="nav-link" href="#next-steps"><span class="header-section-number">16.2.5</span> 5. Next Steps</a></li>
</ul>
</li>
<li><a class="nav-link" href="#available-tasks"><span class="header-section-number">16.3</span> Available Tasks</a></li>
<li><a class="nav-link" href="#useful-resources"><span class="header-section-number">16.4</span> Useful Resources</a></li>
<li><a class="nav-link" href="#notes"><span class="header-section-number">16.5</span> Notes</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Tercen developer’s guide</strong>" was written by Tercen. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
