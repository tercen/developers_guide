<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 18 Continuous Integration Workflow | Tercen developer’s guide</title>
<meta name="author" content="Tercen">
<meta name="description" content="Here is a link to the Workflow CI Action that is triggered after each push. This GitHub Action is a continuous integration (CI) workflow that automates the process of testing a workflow template...">
<meta name="generator" content="bookdown 0.43 with bs4_book()">
<meta property="og:title" content="Chapter 18 Continuous Integration Workflow | Tercen developer’s guide">
<meta property="og:type" content="book">
<meta property="og:description" content="Here is a link to the Workflow CI Action that is triggered after each push. This GitHub Action is a continuous integration (CI) workflow that automates the process of testing a workflow template...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 18 Continuous Integration Workflow | Tercen developer’s guide">
<meta name="twitter:description" content="Here is a link to the Workflow CI Action that is triggered after each push. This GitHub Action is a continuous integration (CI) workflow that automates the process of testing a workflow template...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.9.0/transition.js"></script><script src="libs/bs3compat-0.9.0/tabs.js"></script><script src="libs/bs3compat-0.9.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Tercen developer’s guide</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Introduction</a></li>
<li><a class="" href="guidelines.html"><span class="header-section-number">1</span> Guidelines</a></li>
<li class="book-part">Getting started</li>
<li><a class="" href="core-concepts.html"><span class="header-section-number">2</span> Core concepts</a></li>
<li><a class="" href="setting-up-tercen-studio.html"><span class="header-section-number">3</span> Setting up Tercen Studio</a></li>
<li class="book-part">R Operator development</li>
<li><a class="" href="general-workflow.html"><span class="header-section-number">4</span> General workflow</a></li>
<li><a class="" href="walkthrough-example-r-operator.html"><span class="header-section-number">5</span> Walkthrough example: R operator</a></li>
<li><a class="" href="deploying-an-r-operator.html"><span class="header-section-number">6</span> Deploying an R operator</a></li>
<li><a class="" href="improving-an-operator.html"><span class="header-section-number">7</span> Improving an operator</a></li>
<li class="book-part">Python Operator development</li>
<li><a class="" href="getting-familiar-with-tercen-studio.html"><span class="header-section-number">8</span> Getting familiar with Tercen Studio</a></li>
<li><a class="" href="developing-a-python-operator.html"><span class="header-section-number">9</span> Developing a Python Operator</a></li>
<li class="book-part">Advanced concepts</li>
<li><a class="" href="continuous-integration-workflow.html"><span class="header-section-number">10</span> Continuous Integration Workflow</a></li>
<li><a class="" href="release-workflow.html"><span class="header-section-number">11</span> Release Workflow</a></li>
<li><a class="" href="installing-an-operator.html"><span class="header-section-number">12</span> Installing an Operator</a></li>
<li><a class="" href="input-and-output-patterns.html"><span class="header-section-number">13</span> Input and Output Patterns</a></li>
<li><a class="" href="gpu-development-in-tercen-studio.html"><span class="header-section-number">14</span> GPU Development in Tercen Studio</a></li>
<li><a class="" href="patterns-for-plot-operators.html"><span class="header-section-number">15</span> Patterns for Plot Operators</a></li>
<li><a class="" href="running-tercen-from-the-cli.html"><span class="header-section-number">16</span> Running Tercen from the CLI</a></li>
<li class="book-part">Templates</li>
<li><a class="" href="building-a-template.html"><span class="header-section-number">17</span> Building a template</a></li>
<li><a class="active" href="continuous-integration-workflow-1.html"><span class="header-section-number">18</span> Continuous Integration Workflow</a></li>
<li class="book-part">Library</li>
<li><a class="" href="tercen-library.html"><span class="header-section-number">19</span> Tercen Library</a></li>
<li><a class="" href="custom-library.html"><span class="header-section-number">20</span> Custom library</a></li>
<li class="book-part">Best practices</li>
<li><a class="" href="naming.html"><span class="header-section-number">21</span> Development guidelines</a></li>
<li><a class="" href="tim.html"><span class="header-section-number">22</span> Using tim</a></li>
<li class="book-part">Troubleshooting</li>
<li><a class="" href="common-operator-issues.html"><span class="header-section-number">23</span> Common operator issues</a></li>
<li><a class="" href="ci-and-github-actions.html"><span class="header-section-number">24</span> CI and Github Actions</a></li>
<li class="book-part">Going forward</li>
<li><a class="" href="next-steps-1.html"><span class="header-section-number">25</span> Next steps</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="glossary.html">Glossary</a></li>
<li><a class="" href="organisation-setup.html">Organisation setup</a></li>
<li><a class="" href="tercen-studio.html">Tercen Studio</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="continuous-integration-workflow-1" class="section level1" number="18">
<h1>
<span class="header-section-number">18</span> Continuous Integration Workflow<a class="anchor" aria-label="anchor" href="#continuous-integration-workflow-1"><i class="fas fa-link"></i></a>
</h1>
<p>Here is a link to the <a href="https://github.com/tercen/actions/tree/main/workflow-CI">Workflow CI Action</a> that is triggered after each push. This GitHub Action is a continuous integration (CI) workflow that automates the process of testing a workflow template using the tercen/workflow_runner_operator Docker container.</p>
<p>Here’s a breakdown of what each part of the workflow does:</p>
<div id="inputs" class="section level3" number="18.0.1">
<h3>
<span class="header-section-number">18.0.1</span> Inputs<a class="anchor" aria-label="anchor" href="#inputs"><i class="fas fa-link"></i></a>
</h3>
<p>The workflow accepts several inputs, which are parameters for the CI process:</p>
<ul>
<li>
<code>git-repository</code> (required): The GitHub repository containing the template to be tested.</li>
<li>
<code>branch</code> (optional, defaults to main): The branch of the GitHub repository.</li>
<li>
<code>tag</code> (optional): A commit or version tag for the GitHub repository.</li>
<li>
<code>git-token</code> (required): GitHub access token used to authenticate and access the repository.</li>
<li>
<code>service-uri</code> (optional): The URI of a service to which the workflow will connect.</li>
<li>
<code>tercen-username</code> (optional): Tercen service username.</li>
<li>
<code>tercen-password</code> (optional): Tercen service password.</li>
</ul>
</div>
<div id="steps" class="section level3" number="18.0.2">
<h3>
<span class="header-section-number">18.0.2</span> Steps<a class="anchor" aria-label="anchor" href="#steps"><i class="fas fa-link"></i></a>
</h3>
<p><strong>1. Start Tercen Services</strong></p>
<p>Action: <a href="mailto:tercen/actions/start-tercen@main" class="email">tercen/actions/start-tercen@main</a>
Starts necessary Tercen services to facilitate the test environment.</p>
<p><strong>2. Log in to Docker Registry</strong></p>
<p>Action: <a href="mailto:docker/login-action@v3.3.0" class="email">docker/login-action@v3.3.0</a>
Logs into the GitHub Container Registry (ghcr.io) using the GitHub actor’s credentials and the provided GitHub access token.</p>
<p><strong>3. Install Template Runner</strong></p>
<p>Run: Pulls the tercen/workflow_runner_operator:latest Docker image to run the workflow template tests.</p>
<p><strong>4. Test Template</strong></p>
<p>Run: Executes the tercen/workflow_runner_operator Docker container.
Uses the inputs for the GitHub repository, username/password for Tercen, the service URI, and the GitHub token to execute the test run.
The –report flag is used to generate a test report.</p>
<p><strong>5. Copy Result File</strong></p>
<p>Run: Copies the test results (a JSON file named test_results.json) from inside the Docker container (workflow_runner) to the local file system.</p>
<p><strong>6. Read Runner Results</strong></p>
<p>Run: Reads the test_results.json file and saves the contents into a GitHub output variable named JSON, removing spaces for easier processing.</p>
<p><strong>7. Check Runner Results</strong></p>
<p>Condition: If the Status field in the JSON output is not “Success,” the workflow will fail with exit 1. This ensures that the test results are evaluated before proceeding.</p>
<p><strong>8. Upload Runner Results</strong></p>
<p>Action: <a href="mailto:actions/upload-artifact@v3" class="email">actions/upload-artifact@v3</a>
The test results (test_results.json) are uploaded as an artifact with a retention of 7 days, allowing the results to be stored and accessed later.</p>
</div>
<div id="summary" class="section level3" number="18.0.3">
<h3>
<span class="header-section-number">18.0.3</span> Summary<a class="anchor" aria-label="anchor" href="#summary"><i class="fas fa-link"></i></a>
</h3>
<p>CI testing is done by pulling a Docker container (tercen/workflow_runner_operator), running tests based on the specified GitHub repository, and evaluating the results. If the tests pass, the results are uploaded as artifacts for later inspection. If the tests fail, the workflow exits with an error.</p>

</div>
</div>



  <div class="chapter-nav">
<div class="prev"><a href="building-a-template.html"><span class="header-section-number">17</span> Building a template</a></div>
<div class="next"><a href="tercen-library.html"><span class="header-section-number">19</span> Tercen Library</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav"><li>
<a class="nav-link" href="#continuous-integration-workflow-1"><span class="header-section-number">18</span> Continuous Integration Workflow</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#inputs"><span class="header-section-number">18.0.1</span> Inputs</a></li>
<li><a class="nav-link" href="#steps"><span class="header-section-number">18.0.2</span> Steps</a></li>
<li><a class="nav-link" href="#summary"><span class="header-section-number">18.0.3</span> Summary</a></li>
</ul>
</li></ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Tercen developer’s guide</strong>" was written by Tercen. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
